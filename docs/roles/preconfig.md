# Роль Preconfig


## Описание
Эта роль предназначена для предварительной настройки сервера, включая установку необходимых пакетов и конфигурацию окружения для веб-приложений. Роль автоматизирует создание директорий, установку Nginx, PHP, Docker и настроек для работы с Docker, что позволяет упростить процесс начальной конфигурации сервера.


## Структура файлов роли
```text
roles/preconfig/
├── handlers
│   └── main.yaml              # Обработчики для перезапуска служб
└── tasks
    └── main.yaml              # Основные задачи роли
```


## Порядок выполнения
1. Создаётся домашняя директория для проекта
2. Устанавливаются Nginx, PHP и необходимые модули
3. Устанавливаются пакеты, необходимые для работы с Docker
4. Добавляется GPG ключ для официального репозитория Docker
5. Добавляется репозиторий Docker в систему
6. Устанавливаются пакеты Docker
7. Проверяется, запущена ли служба Docker, и, при необходимости, она запускается
8. Проверяется наличие группы docker, и при её отсутствии создаётся
9. Добавляется пользователь в группу docker, чтобы предоставить ему права на использование Docker
10. Если пользователь был добавлен в группу, происходит перезапуск службы SSH


## Заключение
Эта роль позволяет автоматизировать начальную настройку сервера, обеспечивая установку всех необходимых компонентов для работы веб-приложений на основе PHP и Docker. Благодаря данной роли можно значительно упростить процесс начальной конфигурации и повысить эффективность развертывания окружения.