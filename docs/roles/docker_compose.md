# Роль Docker Compose


## Описание
Эта роль предназначена для управления Docker Compose и развертывания веб-приложений с использованием контейнеров Docker. Она настраивает стек, состоящий из базы данных MySQL, веб-сервера PHP и nginx, обеспечивая простое развёртывание и управление приложением.


## Структура файлов роли
```text
roles/docker_compose/
├── defaults
│   └── main.yml              # Переменные по умолчанию
├── files
│   ├── Dockerfile            # Dockerfile для приложения
│   └── docker-compose.yml    # Основной файл конфигурации docker-compose
├── handlers
│   └── main.yaml             # Обработчики для перезапуска контейнеров
├── src
│   └── index.php             # Исходный код приложения
└── tasks
    └── main.yaml             # Основные задачи роли
```


## Переменные по умолчанию
По умолчанию используется следующая переменная, определённая в файле `defaults/main.yml`:
- `service_name`: Имя сервиса, по умолчанию установлено как `web`


## Порядок выполнения
1. Роль копирует `Dockerfile` и `docker-compose.yml` на удалённый сервер
2. Файлы исходного кода из папки `src` синхронизируются с удалённым сервером
3. Если произошли изменения в файлах исходного кода, происходит перезапуск контейнера `web`
4. Выполняется команда для запуска контейнеров Docker с помощью `docker compose`


## Структура кода
В файле `src/index.php` представлено простое приложение, которое отображает текущую дату и позволяет вам добавлять свою рекламу.


## Заключение
Эта роль делает процесс развертывания веб-приложений простым и удобным благодаря использованию контейнеров Docker. Настройка, которую она предоставляет, позволяет легко управлять зависимостями и окружением приложения.